const { SlashCommandBuilder, MessageFlags, InteractionContextType, ApplicationIntegrationType, ActionRowBuilder, ButtonBuilder, ButtonStyle } = require('discord.js');

module.exports = {
  data: new SlashCommandBuilder()
    .setName('pacman')
    .setDescription('play pacman')
    .setContexts([InteractionContextType.Guild, InteractionContextType.BotDM, InteractionContextType.PrivateChannel])
    .setIntegrationTypes([ApplicationIntegrationType.GuildInstall, ApplicationIntegrationType.UserInstall]),
  test: true,
  async execute(interaction) {
    const components = [
      new ActionRowBuilder().addComponents(
        new ButtonBuilder().setCustomId('pacman-0').setLabel('â–ªï¸').setStyle(ButtonStyle.Secondary).setDisabled(true),
        new ButtonBuilder().setCustomId('pacman-up').setLabel('â¬†ï¸').setStyle(ButtonStyle.Secondary),
        new ButtonBuilder().setCustomId('pacman-2').setLabel('â–ªï¸').setStyle(ButtonStyle.Secondary).setDisabled(true)
      ),
      new ActionRowBuilder().addComponents(
        new ButtonBuilder().setCustomId('pacman-left').setLabel('â¬…ï¸').setStyle(ButtonStyle.Secondary),
        new ButtonBuilder().setCustomId('pacman-4').setLabel('ğŸ”µ').setStyle(ButtonStyle.Secondary).setDisabled(true),
        new ButtonBuilder().setCustomId('pacman-right').setLabel('â¡ï¸').setStyle(ButtonStyle.Success)
      ),
      new ActionRowBuilder().addComponents(
        new ButtonBuilder().setCustomId('pacman-6').setLabel('â–ªï¸').setStyle(ButtonStyle.Secondary).setDisabled(true),
        new ButtonBuilder().setCustomId('pacman-down').setLabel('â¬‡ï¸').setStyle(ButtonStyle.Secondary),
        new ButtonBuilder().setCustomId('pacman-8').setLabel('â–ªï¸').setStyle(ButtonStyle.Secondary).setDisabled(true)
      ),
    ];

    let board = 'â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â”‚ â”‚ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â”‚\nâ”‚ â€¢ â•­â”€â”€â”€â”€â”€â•® â€¢ â•­â”€â”€â”€â”€â”€â”€â”€â•® â€¢ â”‚ â”‚ â€¢ â•­â”€â”€â”€â”€â”€â”€â”€â•® â€¢ â•­â”€â”€â”€â”€â”€â•® â€¢ â”‚\nâ”‚ â— â”‚     â”‚ â€¢ â”‚       â”‚ â€¢ â”‚ â”‚ â€¢ â”‚       â”‚ â€¢ â”‚     â”‚ â— â”‚\nâ”‚ â€¢ â•°â”€â”€â”€â”€â”€â•¯ â€¢ â•°â”€â”€â”€â”€â”€â”€â”€â•¯ â€¢ â•°â”€â•¯ â€¢ â•°â”€â”€â”€â”€â”€â”€â”€â•¯ â€¢ â•°â”€â”€â”€â”€â”€â•¯ â€¢ â”‚\nâ”‚ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â”‚\nâ”‚ â€¢ â•­â”€â”€â”€â”€â”€â•® â€¢ â•­â”€â•® â€¢ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â€¢ â•­â”€â•® â€¢ â•­â”€â”€â”€â”€â”€â•® â€¢ â”‚\nâ”‚ â€¢ â•°â”€â”€â”€â”€â”€â•¯ â€¢ â”‚ â”‚ â€¢ â•°â”€â”€â”€â”€â”€â•® â•­â”€â”€â”€â”€â”€â•¯ â€¢ â”‚ â”‚ â€¢ â•°â”€â”€â”€â”€â”€â•¯ â€¢ â”‚\nâ”‚ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â”‚ â”‚ â€¢ â€¢ â€¢ â€¢ â”‚ â”‚ â€¢ â€¢ â€¢ â€¢ â”‚ â”‚ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â€¢ â”‚ â•°â”€â”€â”€â”€â”€â•®   â”‚ â”‚   â•­â”€â”€â”€â”€â”€â•¯ â”‚ â€¢ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯\n          â”‚ â€¢ â”‚ â•­â”€â”€â”€â”€â”€â•¯   â•°â”€â•¯   â•°â”€â”€â”€â”€â”€â•® â”‚ â€¢ â”‚          \n          â”‚ â€¢ â”‚ â”‚                     â”‚ â”‚ â€¢ â”‚          \n          â”‚ â€¢ â”‚ â”‚   â•”â•â•â•â•â•â”â”â”â•â•â•â•â•â•—   â”‚ â”‚ â€¢ â”‚          \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â€¢ â•°â”€â•¯   â•‘             â•‘   â•°â”€â•¯ â€¢ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n            â€¢       â•‘             â•‘       â€¢            \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â€¢ â•­â”€â•®   â•‘             â•‘   â•­â”€â•® â€¢ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n          â”‚ â€¢ â”‚ â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚ â”‚ â€¢ â”‚          \n          â”‚ â€¢ â”‚ â”‚                     â”‚ â”‚ â€¢ â”‚          \n          â”‚ â€¢ â”‚ â”‚   â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®   â”‚ â”‚ â€¢ â”‚          \nâ•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â€¢ â•°â”€â•¯   â•°â”€â”€â”€â”€â”€â•® â•­â”€â”€â”€â”€â”€â•¯   â•°â”€â•¯ â€¢ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®\nâ”‚ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â”‚ â”‚ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â”‚\nâ”‚ â€¢ â•­â”€â”€â”€â”€â”€â•® â€¢ â•­â”€â”€â”€â”€â”€â”€â”€â•® â€¢ â”‚ â”‚ â€¢ â•­â”€â”€â”€â”€â”€â”€â”€â•® â€¢ â•­â”€â”€â”€â”€â”€â•® â€¢ â”‚\nâ”‚ â€¢ â•°â”€â”€â”€â•® â”‚ â€¢ â•°â”€â”€â”€â”€â”€â”€â”€â•¯ â€¢ â•°â”€â•¯ â€¢ â•°â”€â”€â”€â”€â”€â”€â”€â•¯ â€¢ â”‚ â•­â”€â”€â”€â•¯ â€¢ â”‚\nâ”‚ â— â€¢ â€¢ â”‚ â”‚ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â–â–ˆâ–Œ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â”‚ â”‚ â€¢ â€¢ â— â”‚\nâ•°â”€â”€â”€â•® â€¢ â”‚ â”‚ â€¢ â•­â”€â•® â€¢ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â€¢ â•­â”€â•® â€¢ â”‚ â”‚ â€¢ â•­â”€â”€â”€â•¯\nâ•­â”€â”€â”€â•¯ â€¢ â•°â”€â•¯ â€¢ â”‚ â”‚ â€¢ â•°â”€â”€â”€â”€â”€â•® â•­â”€â”€â”€â”€â”€â•¯ â€¢ â”‚ â”‚ â€¢ â•°â”€â•¯ â€¢ â•°â”€â”€â”€â•®\nâ”‚ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â”‚ â”‚ â€¢ â€¢ â€¢ â€¢ â”‚ â”‚ â€¢ â€¢ â€¢ â€¢ â”‚ â”‚ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â”‚\nâ”‚ â€¢ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â•°â”€â”€â”€â”€â”€â•® â€¢ â”‚ â”‚ â€¢ â•­â”€â”€â”€â”€â”€â•¯ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â€¢ â”‚\nâ”‚ â€¢ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â€¢ â•°â”€â•¯ â€¢ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â€¢ â”‚\nâ”‚ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â€¢ â”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯';

    await interaction.reply(`\`\`\`${board}\`\`\``);
    await interaction.followUp({ components });

    for (let i = 0; i < 20; i++) {
      await interaction.editReply({ content: `\`\`\`${board = board.replace(/â–â–ˆâ–Œ./, ' â–â–ˆâ–Œ')}\`\`\`` });
      await new Promise(r => setTimeout(r, 500));
    }
  },
};
